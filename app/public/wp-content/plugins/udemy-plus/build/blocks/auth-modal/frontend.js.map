{"version":3,"file":"blocks/auth-modal/frontend.js","mappings":"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","sources":["webpack://udemy-plus/./src/blocks/auth-modal/frontend.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n  const openModalBtn = document.querySelectorAll('.open-modal')\n  const modalEl = document.querySelector(\n    '.wp-block-udemy-plus-auth-modal'\n  )\n  const modalCloseEl = document.querySelectorAll(\n    '.modal-overlay, .modal-btn-close'\n  )\n\n  openModalBtn.forEach(el => {\n    el.addEventListener('click', event => {\n      event.preventDefault()\n\n      modalEl.classList.add('modal-show')\n    })\n  })\n\n  modalCloseEl.forEach(el => {\n    el.addEventListener('click', event => {\n      event.preventDefault()\n\n      modalEl.classList.remove('modal-show')\n    })\n  })\n\n  const tabs = document.querySelectorAll('.tabs a')\n  const signinForm = document.querySelector('#signin-tab')\n  const signupForm = document.querySelector('#signup-tab')\n\n  tabs.forEach(tab => {\n    tab.addEventListener('click', event => {\n      event.preventDefault()\n\n      tabs.forEach(currentTab => {\n        currentTab.classList.remove('active-tab')\n      })\n\n      event.currentTarget.classList.add('active-tab')\n\n      const activeTab = event.currentTarget.getAttribute('href')\n\n      if (activeTab === '#signin-tab') {\n        signinForm.style.display = 'block'\n        signupForm.style.display = 'none'\n      } else {\n        signinForm.style.display = 'none'\n        signupForm.style.display = 'block'\n      }\n    })\n  })\n\n  signupForm?.addEventListener('submit', async event => {\n    event.preventDefault()\n\n    const signupFieldset = signupForm.querySelector('fieldset')\n    signupFieldset.setAttribute('disabled', true)\n\n    const signupStatus = signupForm.querySelector('#signup-status')\n    signupStatus.innerHTML = `\n      <div class=\"modal-status modal-status-info\">\n        Please wait! We are creating your account.\n      </div>\n    `\n\n    const formData = {\n      username: signupForm.querySelector('#su-name').value,\n      email: signupForm.querySelector('#su-email').value,\n      password: signupForm.querySelector('#su-password').value\n    }\n\n    const response = await fetch(up_auth_rest.signup, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(formData)\n    });\n\n    const responseJSON = await response.json()\n\n    if(responseJSON.status === 2) {\n      signupStatus.innerHTML = `\n        <div class=\"modal-status modal-status-success\">\n          Success! Your account has been created.\n        </div>\n      `\n      location.reload()\n    } else {\n      signupFieldset.removeAttribute('disabled')\n      signupStatus.innerHTML = `\n        <div class=\"modal-status modal-status-danger\">\n          Unable to create account! Please try again later.\n        </div>\n      `\n    }\n  })\n\n  signinForm?.addEventListener('submit', async event => {\n    event.preventDefault()\n\n    const signinFieldset = signinForm.querySelector('fieldset')\n    const signinStatus = signinForm.querySelector('#signin-status')\n\n    signinFieldset.setAttribute('disabled', true)\n    signinStatus.innerHTML = `\n      <div class=\"modal-status modal-status-info\">\n        Please wait! We are logging you in.\n      </div>\n    `\n\n    const formData = {\n      user_login: signinForm.querySelector('#si-email').value,\n      password: signinForm.querySelector('#si-password').value\n    }\n\n    const response = await fetch(up_auth_rest.signin, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(formData)\n    })\n\n    const responseJSON = await response.json()\n\n    if(responseJSON.status === 2) {\n      signinStatus.innerHTML = `\n        <div class=\"modal-status modal-status-success\">\n          Success! You are now logged in.\n        </div>\n      `\n      location.reload()\n    } else {\n      signinFieldset.removeAttribute('disabled')\n      signinStatus.innerHTML = `\n        <div class=\"modal-status modal-status-danger\">\n          Invalid credentials! Please try again later.\n        </div>\n      `\n    }\n  })\n})"],"names":["document","addEventListener","openModalBtn","querySelectorAll","modalEl","querySelector","modalCloseEl","forEach","el","event","preventDefault","classList","add","remove","tabs","signinForm","signupForm","tab","currentTab","currentTarget","activeTab","getAttribute","style","display","signupFieldset","setAttribute","signupStatus","innerHTML","formData","username","value","email","password","response","fetch","up_auth_rest","signup","method","headers","body","JSON","stringify","responseJSON","json","status","location","reload","removeAttribute","signinFieldset","signinStatus","user_login","signin"],"sourceRoot":""}